<!--
=================================================
; Title: Britt-calorie.html
; Author: Andrew Britt
; Date: 16 Jun 2022
; Description: Calorie Converter Application
; References: WEB-330 assignment PDF week-4
; Date reference accessed: 16 Jun 2022
=================================================
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!--CSS links-->
    <link rel="stylesheet" href="Britt-calorie.css">
    <link rel="stylesheet" href="../site.css">
    <link rel="stylesheet" href="../global.css">
    <link rel="stylesheet" href="../theme.css">

    <!--Google font links-->
    <link rel="preconnect" href="https://fonts.googleapis.com"> 
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> 
    <link href="https://fonts.googleapis.com/css2?family=Oswald&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <script type="application/javascript" src="../theme.js"></script>

    <title>WEB-330 Enterprise JavaScript II</title>
</head>

<body class="light-theme">

    <i class="fa fa-toggle-off pull-right" style="font-size: 28px;" onclick="toggleMode(this)"><span id="icon-text"></span></i>

    <h1 class="app-header">Welcome to the Calorie App!</h1>

    <!--This is the Search Form Div-->
    <div class="card-title-two">
        <div class="card-title">
            Calories Search Form
        </div>
        <div id="containerMain">
            <label class="form-field">Enter a food item:</label>
            <input id="txtFoodItem"/>

            <span id="foodList">(Ex: Egg, Apple, Hamburger, Fries, Banana, Soda)</span>

            <!--Search Button-->
            <button id="btnSearch">Search</button>
            
        </div>
    </div>

    <!--Anchor tag for Return Button-->
    <a id="returnBtn" href="../index.html">Return</a>
  
    <!--This is the Results Div-->
    <div class="card-title-two">

        <div class="card-title">Search Results</div>
        <br>

        <div class="card-content" id="searchResults"></div>
    </div>


<!--Module Import JavaScript files-->
<script type="module">
    setSelectedTheme();

    // import from CalorieConverter
    import { CalorieConverter } from "./calorie-converter.js"; 

    // variable to bind to input ID
    let txtFoodItemEl = document.getElementById("txtFoodItem");

    // variable to hold input value
    let txtFoodItem = txtFoodItemEl.value.toLowerCase();

//onClick event for comparison of data values and table building
document.getElementById("btnSearch").onclick = ()=>
{
    // foods variable passes input value to find() for array object return
    let foods = CalorieConverter.find(txtFoodItem);

    // tableData variable builds HTML table
    let tableData = 
        `
            <table class="table">
            <th>Name: </th>
            <th>Calories: </th>
            <tbody class="table-hover">
        `;
    // for loop iterates over the array to find matching object value
    for(let food of foods)
    {
        // binding tableData to selected tableData return values
        tableData += 
        `   <tr>
            <td>${food.name}</td>
            <td>${food.calories}</td>
            </tr>
        `;
    }
    // let tableData = CalorieConverter.data;
    document.getElementById("searchResults").innerHTML = 
        tableData +
        `
            </tbody></table>
        `;
    //console.log(tableData);
};
// end of onClick function

// Beginning of keyUp function for "click" and "Enter"
window.addEventListener("keyup",(event)=> 
{
    if(event.key === "Enter") 
    {
        event.preventDefault();
        document.getElementById("btnSearch").click();
    }
});

    // variable to hold array of objects
    const foodList=CalorieConverter.data;

    // variable of array items
    let foodListData=`<i>(Ex: `;
    for(let fName of foodList) 
    {
        foodListData+=fName.name+", ";
    }
    document.getElementById("foodList").innerHTML = foodListData.slice(0,-2)+")</i>";

    
</script>

</body>
</html>

