<!--
=================================================
; Title: Britt-bobs-auto-repair.html
; Author: Andrew Britt
; Date: 24 Jun 2022
; Description: Calorie Converter Application
; References: WEB-330 assignment PDF week-5
; Date reference accessed: 24 Jun 2022
=================================================
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!--CSS links-->
    <link rel="stylesheet" href="Britt-bobs-auto-repair.css">
    <link rel="stylesheet" href="../site.css">
    <link rel="stylesheet" href="../global.css">
    <link rel="stylesheet" href="../theme.css">

    <!--Google font links-->
    <link rel="preconnect" href="https://fonts.googleapis.com"> 
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> 
    <link href="https://fonts.googleapis.com/css2?family=Oswald&display=swap" rel="stylesheet">

    <!--Font awesome link-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
    <!--Script scr to theme file-->
    <script type="application/javascript" src="../theme.js"></script>

    <title>WEB-330 Enterprise JavaScript II</title>
</head>

<body class="light-theme">

    <!-- code for night/day mode button and functionality -->
    <i class="fa fa-toggle-off pull-right" style="font-size: 28px;" onclick="toggleMode(this)"><span id="icon-text"></span></i>

<div class="assign-container">
    <h1 class="app-header">Welcome to Bob's Automotive Repair Shop!</h1>
    <div class="assign-container">
        <div class="card">
            <div class="card-title">Product Listing</div>
            <div class="form-field">
                <label for="productList">Choose a product:</label>
                <select class="drop-down-menu" id="productList">
                    <option value="Select">--Select--</option>
                    <option value="19.99">Oil Change</option>
                    <option value="18.44">Filter Replacement</option>
                    <option value="9.99">Wiper Fluid Refill</option>
                </select>
                <i id="cart-message">To view your shopping cart click on the cart icon</i>
                <i id="cartIcon"></i>
                <button class="btn btn-primary full-width" id="btnAddProduct">Add to Cart</button>
            </div>
        </div>
        <br>

        <!--Anchor tag for Return Button-->
        <a class="return-home" href="../index.html">Return</a>
        <br>
        <div class="card">
            <div class="card-title">Shopping Cart</div>
        
            <div class="card-content">
                <div>
                    <br>
                    <div class="assign-text-results card-content" id="shoppingCart"></div>
                </div>
                <br>
            </div>
        </div>
    </div>
</div>

<script type="module">

    //setDefaultTheme();
    setSelectedTheme();

    // importing of classes from JavaScript files
    import { Product } from "./product.js";
    import { ShoppingCart } from "./shopping-cart.js";
    //import { CartComponent } from "./cart-component.js";

    // new instance of ShoppingCart object
    let shoppingCart = new ShoppingCart;

    // declaration of setCartCount function
    function setCartCount(){}; 

    document.getElementById('btnAddProduct').onclick = () =>
    {
        // variable to bind drop-down value of productList 
        let productList = document.getElementById('productList');
        
        // binding productList text to product variable
        let product = productList.options[productList.selectedIndex].text;

        // binding productList value to productValue variable
        let productValue = productList.options[productList.selectedIndex].value;

        // if statement to show alert of product and price
        if (product != "--Select--")
        {
            shoppingCart.add(new Product(product, productValue));
            // calling the setCartCount function
            setCartCount();
            {
                return alert(product + " was added to your shopping cart!");

            }
                     
        }
 
    };
  

    document.getElementById('cartIcon').onclick = function()
    {
        let cartDisplayTable = `<table class="table"><tr><th>ID</th><th>Name</th><th>Price</th>`;

        for (let _products of shoppingCart)
        {
            cartDisplayTable += 
            `
            <tr>
                <td>${_products.id}</td>
                <td>${_products.name}</td>
                <td>${_products.price}</td>
            </tr>
            `
        }
        cartDisplayTable += `</table>`
        document.getElementById('shoppingCart').innerHTML = cartDisplayTable;
    };

    setCartCount()
    {
        document.getElementById('cart-count').innerHTML = shoppingCart.count();
    }

</script>

</body>
</html>